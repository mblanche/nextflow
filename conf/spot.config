workDir = "s3://tower-ops-2/work"

aws.region =  'us-west-2'
aws.batch.cliPath = '/home/ec2-user/miniconda/bin/aws'
aws.batch.maxTransferAttempts = 5
aws.client.uploadMaxThreads = 10
aws.batch.maxParallelTransfers = 4

process {
    executor = 'awsbatch'
    errorStrategy = 'retry'
    maxRetries = 4
    queue = { task.attempt == process.maxRetries ? 'vipQ' : 'spotQ' }
    
    withLabel: vip {
        queue = 'vipQ'
    }
    withLabel: movers {
        queue = 'moversQ'
    }
    withLabel: largeHD {
        queue = { task.attempt == process.maxRetries ? 'largeVIPQ' : 'largeSpotQ' }
    }
    withLabel: gpu {
        queue = { task.attempt == process.maxRetries ? 'vipGPUQ' : 'spotGPUQ' }
    }
}
